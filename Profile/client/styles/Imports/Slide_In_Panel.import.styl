$color-1 = #333333
$color-4 = white
$color-5 = #89ba2c

// $primary-font: 'Droid Sans', sans-serif;
// $secondary-font: 'Droid Serif', serif;

$panel-width-S = 100%
$panel-width-M = 100%
$panel-width-L = 100%
$title-panel-height = 75px
$title-panel-offset = 0px
base-index = 100

// rem fallback - credits: http://zerosixthree.se/
calculateRem($size)
  unit($size/16, 'rem')
font-size($size)
  font-size: $size
  font-size: calculateRem($size)
// anti-aliasing mode font rendering
font-smoothing()
  -webkit-font-smoothing: antialiased
  -moz-osx-font-smoothing: grayscale

// breakpoints - from Bootstrap
$S = $screen-xs
$M = $screen-sm
$L = $screen-md

// media queries
MQ($canvas)
  if $canvas == S
    @media only screen and (min-width: $S)
      {block}
  else if $canvas == M
    @media only screen and (min-width: $M)
      {block}
  else if $canvas == L
    @media only screen and (min-width: $L)
      {block}

/* --------------------------------

        Primary style

-------------------------------- */

// Clever trick from: https://css-tricks.com/inheriting-box-sizing-probably-slightly-better-best-practice/
html
  box-sizing border-box

*, *:before, *:after
  box-sizing inherit

/* --------------------------------

        Main components

-------------------------------- */
// html, body
//  height: 100%

// .cd-main-content
//   text-align: center
//   h1.cd
//     font-size(20px)
//     color: lighten($color-1, 16%)
//     padding: 4em 0
//   .cd-btn
//     position: relative
//     display: inline-block
//     padding: 1em 2em
//     background-color: $color-4
//     color: $color-1
//     font-weight: bold
//     font-smoothing()
//     border-radius: 50em
//     box-shadow: inset 0 1px 0 rgba(white, 0.5), 0 0 5px rgba(black, 0.1)
//     transition: all 0.2s
//     .no-touch &:hover
//       box-shadow: inset 0 1px 0 rgba(white, 0.5), 0 0 20px rgba(black, 0.3)
//   +MQ(L)
//     h1.cd
//       font-size(32px)

.noscroll
  overflow: hidden

.cd-panel
  &::after, &::before
    content: ''
  position: fixed
  top: 0
  left: 0
  height: 100%
  width: 100%
  visibility: hidden
  transition: visibility 0s 0.6s
  z-index: (base-index - 1)
  &::after
    /* overlay layer */
    position: absolute
    top: 0
    left: 0
    width: 100%
    height: 100%
    background: rgba(black, 0)
    cursor: pointer
    transition: background 0.3s 0.3s
  &.is-visible
    visibility: visible
    transition: visibility 0s 0s
    &::after
      background: rgba(black, 0.6)
      transition: background 0.3s 0s
    .cd-panel-close::before
      animation: cd-close-1 0.6s 0.3s
    .cd-panel-close::after
      animation: cd-close-2 0.6s 0.3s

@keyframes cd-close-1
	0%, 50%
		transform: rotate(0)
	100%
		transform: rotate(45deg)

@keyframes cd-close-2
	0%, 50%
		transform: rotate(0)
	100%
		transform: rotate(-45deg)

.cd-panel-header
  position: fixed
  width: $panel-width-S
  // variables inside partials > _variables.scss
  height: $title-panel-height
  line-height: 50px
  margin: 0
  background: rgba($color-4, 0.96)
  z-index: (2 + base-index)
  box-shadow: 0 1px 1px rgba(black, 0.08)

  // On small screens, runs way over allotted space - sort of a very forced workaround
  overflow: hidden

  h1.cd
    font-weight: bold
    color: $color-1

    // Aligned title with main content of body text
    max-width 700px
    margin-right auto
    margin-left auto

    // This should be vertically centered (possibly flexbox with Lost grid?):
    margin-top: (($title-panel-height - 50) / 2)
  .from-right &, .from-left &
    top: ($title-panel-offset - $title-panel-height)
    transition: top .3s 0s
  .from-right &
    right: 0
  .from-left &
    left: 0
  .is-visible &
    top: $title-panel-offset
    transition: top 0.3s 0.3s
  +MQ(M)
    width: $panel-width-M
  +MQ(L)
    width: $panel-width-L

.cd-panel-close
  &::after, &::before
    content: ''
  position: absolute
  top: (($title-panel-height - 50) / 2)
  right: 5%
  height: 100%
  width: 60px
  /* image replacement */
  display: inline-block
  overflow: hidden
  text-indent: 100%
  white-space: nowrap
  &::before, &::after
    /* close icon created in CSS */
    position: absolute
    top: 22px
    left: 20px
    height: 3px
    width: 20px
    background-color: $color-1
    /* this fixes a bug where pseudo elements are slightly off position */
    backface-visibility: hidden
  &::before
    transform(rotate(45deg))
  &::after
    transform(rotate(-45deg))
  .no-touch &:hover
    &::before, &::after
      background-color: $color-1
      transition-property(transform)
      transition-duration(0.3s)
    &::before
      transform(rotate(220deg))
    &::after
      transform(rotate(135deg))

.cd-panel-container
  position: fixed
  width: $panel-width-S
  height: 100%
  top: 0
  background: $color-4
  z-index: (1 + base-index)
  transition-property(transform)
  transition-duration(0.3s)
  transition-delay(0.3s)
  .from-right &
    right: 0
    transform(translate3d(100%, 0, 0))
  .from-left &
    left: 0
    transform(translate3d(-100%, 0, 0))
  .is-visible &
    transform(translate3d(0, 0, 0))
    transition-delay(0s)
  +MQ(M)
    width: $panel-width-M
  +MQ(L)
    width: $panel-width-L

.cd-panel-content
  position: absolute
  top: 0
  left: 0
  width: 100%
  height: 100%
  /* top | right | bottom | left */
  padding: ($title-panel-height+20+$title-panel-offset) 5% 5% 5%
  overflow: auto
  z-index: base-index
  /* smooth scrolling on touch devices */
  -webkit-overflow-scrolling: touch


// Based on Medium's style sheet
h4.cd
  margin-top 30px

  width 100%
  max-width 700px

  font-family: medium-content-sans-serif-font, 'Lucida Grande', 'Lucida Sans Unicode', 'Lucida Sans', Geneva, Verdana, sans-serif;
  font-size: 28px;
  font-style: normal;
  font-weight: bold;
  letter-spacing: -0.72px;

  // Center content
  display block
  margin-left auto
  margin-right auto
  +MQ(M)
    height: 41px;
    line-height: 41.4px;



h5.cd
  margin-top 20px

  width 100%
  max-width 700px

  font-family: medium-content-sans-serif-font, 'Lucida Grande', 'Lucida Sans Unicode', 'Lucida Sans', Geneva, Verdana, sans-serif;
  font-size: 15px;
  font-style: normal;
  font-weight: bold;
  letter-spacing: -0.72px;

  // Center content
  display block
  margin-left auto
  margin-right auto

p.cd
  width 100%
  max-width 700px

  -webkit-font-smoothing: antialiased;
  color: rgba(0, 0, 0, 0.8);
  font-family: medium-content-serif-font, Georgia, Cambria, 'Times New Roman', Times, serif;
  font-size(16px) // set elsewhere in this doc
  font-style: normal;
  font-weight: normal;
  letter-spacing: -0.063px;
  word-wrap: break-word

  // Center content
  display block
  margin-left auto
  margin-right auto
  line-height: 25px
  // +MQ(M)
  //   line-height: 33.18px;

  // font-size(16px)
  // +MQ(M)
  //   p.cd
  //     font-size(16px)


ul
  width 100%
  max-width 700px
  // Center content
  display block
  margin-left auto
  margin-right auto
  & li
    -webkit-font-smoothing: antialiased;
    color: rgba(0, 0, 0, 0.8);
    font-family: medium-content-serif-font, Georgia, Cambria, 'Times New Roman', Times, serif;
    font-size 16px
    font-style: normal;
    font-weight: normal;
    // letter-spacing: -0.063px;
    word-wrap: break-word
  & li a
    -webkit-font-smoothing: antialiased;
    // color: rgba(0, 0, 0, 0.8);
    font-family: medium-content-serif-font, Georgia, Cambria, 'Times New Roman', Times, serif;
    font-size 16px
    font-style: normal;
    font-weight: normal;
    // letter-spacing: -0.063px;
    word-wrap: break-word

/* --------------------------------

        Style the tool tip for the escape button feature

-------------------------------- */

.cd-panel-tooltip
  position absolute
  display: block
  z-index: 1020
  color light
  font-size: 16px
  text-align: center
  text-decoration: none
  background-color dark
  border-radius: 5px
  top (($title-panel-height - 39) / 2)
  right 120px
  +MQ(L)
    right 125px
  padding: 10px

  // Make only visible on md or larger screens
  opacity 0
  // +MQ(M)
  &.visible
    opacity 1
  transition all 0.1s

.tooltip-arrow-right
  // Place the arrow
  position absolute
  top (($title-panel-height - 18) / 2)
  right 110px + 1px
  +MQ(L)
    right 125px + 1px
  z-index 1010

  // Make only visible on md or larger screens
  opacity 0
  // +MQ(M)
  &.visible
    opacity 1
  transition all 0.1s

  // Now the Trippy part
  width 0px
  height 0px
  border-top: 9px solid transparent
  border-bottom: 9px solid transparent
  border-left: 9px solid dark